<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>metadata_map — metadata_map • mapmetadata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="metadata_map — metadata_map"><meta name="description" content="This function will read in the metadata file for a chosen dataset and create
a summary plot. It will ask a user to select a table from this dataset to
process, and loop through all the variables in this table, asking the user to
map (categorise) each variable to one or more domains. The domains will
appear in the Plots tab for the user's reference.
These categorisations will be saved to a csv file, alongside a log file which
summarises the session details. To speed up this process, some
auto-categorisations will be made by the function for commonly occurring
variables, and categorisations for the same variable can be copied from one
table to another.
Example inputs are provided within the package data, for the user to run this
function in a demo mode. Refer to the package website for more guidance."><meta property="og:description" content="This function will read in the metadata file for a chosen dataset and create
a summary plot. It will ask a user to select a table from this dataset to
process, and loop through all the variables in this table, asking the user to
map (categorise) each variable to one or more domains. The domains will
appear in the Plots tab for the user's reference.
These categorisations will be saved to a csv file, alongside a log file which
summarises the session details. To speed up this process, some
auto-categorisations will be made by the function for commonly occurring
variables, and categorisations for the same variable can be copied from one
table to another.
Example inputs are provided within the package data, for the user to run this
function in a demo mode. Refer to the package website for more guidance."><meta property="og:image" content="https://ropensci.github.io/mapmetadata/logo.png"><script defer data-domain="pkgdown.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mapmetadata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">4.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mapmetadata.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/HealthMetadata.html">Health metadata</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/mapmetadata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>metadata_map</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/mapmetadata/blob/v4.0.1/R/metadata_map.R" class="external-link"><code>R/metadata_map.R</code></a></small>
      <div class="d-none name"><code>metadata_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will read in the metadata file for a chosen dataset and create
a summary plot. It will ask a user to select a table from this dataset to
process, and loop through all the variables in this table, asking the user to
map (categorise) each variable to one or more domains. The domains will
appear in the Plots tab for the user's reference. <br><br>
These categorisations will be saved to a csv file, alongside a log file which
summarises the session details. To speed up this process, some
auto-categorisations will be made by the function for commonly occurring
variables, and categorisations for the same variable can be copied from one
table to another. <br><br>
Example inputs are provided within the package data, for the user to run this
function in a demo mode. Refer to the package website for more guidance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">metadata_map</span><span class="op">(</span></span>
<span>  metadata_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  domain_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  look_up_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  table_copy <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  long_output <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  demo_number <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-metadata-file">metadata_file<a class="anchor" aria-label="anchor" href="#arg-metadata-file"></a></dt>
<dd><p>This should be a csv download from HDRUK gateway
(in the form of ID_Dataset_Metadata.csv). Run '?mapmetadata::metadata' to
see how the metadata_file for the demo was created.</p></dd>


<dt id="arg-domain-file">domain_file<a class="anchor" aria-label="anchor" href="#arg-domain-file"></a></dt>
<dd><p>This should be a csv file created by the user, with two
columns (Domain_Code and Domain_Name). Run '?mapmetadata::domain_list' to
see how the domain_file for the demo was created.</p></dd>


<dt id="arg-look-up-file">look_up_file<a class="anchor" aria-label="anchor" href="#arg-look-up-file"></a></dt>
<dd><p>The lookup file makes auto-categorisations intended for
variables that appear regularly in health datasets. It only works for 1:1
mappings right now, i.e. variable should only be listed once in the file.
Run '?mapmetadata::look_up' to see how the default look_up was created.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>The path to the directory where the two csv output files
will be saved. Default is the current working directory.</p></dd>


<dt id="arg-table-copy">table_copy<a class="anchor" aria-label="anchor" href="#arg-table-copy"></a></dt>
<dd><p>Turn on copying between tables (default TRUE).
If TRUE, categorisations you made for all other tables in this dataset will
be copied over (if 'OUTPUT_' files are found in output_dir). This can be
useful when the same variables appear across multiple tables within one
dataset; copying from one table to the next will save the user time, and
ensure consistency of categorisations across tables.</p></dd>


<dt id="arg-long-output">long_output<a class="anchor" aria-label="anchor" href="#arg-long-output"></a></dt>
<dd><p>Run map_convert.R to create a new longer output. Default
is TRUE.</p></dd>


<dt id="arg-demo-number">demo_number<a class="anchor" aria-label="anchor" href="#arg-demo-number"></a></dt>
<dd><p>How many table variables to loop through in the demo.
Default is 5.
'L-OUTPUT_' which gives each categorisation its own row. Default is TRUE.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Default is FALSE. Change to TRUE to quiet the cli_alert_info
and cli_alert_success messages.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A html plot summarising the dataset. Various csv and png outputs to
summarise the user's mapping session for a specific table in the dataset.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Demo run requires no function inputs but requires user interaction.</span></span></span>
<span class="r-in"><span><span class="co"># See package documentation to guide user inputs.</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">temp_output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">metadata_map</span><span class="op">(</span>output_dir <span class="op">=</span> <span class="va">temp_output_dir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.turing.ac.uk/people/researchers/rachael-stickland" class="external-link">Rachael Stickland</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

